# Archevi Production Environment Variables
# Copy this file to .env.production and fill in all values
# NEVER commit .env.production to version control!

# =============================================================================
# DOMAIN CONFIGURATION
# =============================================================================

# Main domain for the application
DOMAIN=archevi.ca

# API domain (Windmill)
API_DOMAIN=api.archevi.ca

# Full base URL for Windmill
BASE_URL=https://api.archevi.ca

# Email for Let's Encrypt certificate notifications
ACME_EMAIL=admin@archevi.ca

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL database name
POSTGRES_DB=archevi

# PostgreSQL username
POSTGRES_USER=archevi

# PostgreSQL password - CHANGE THIS! Use a strong random password
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_THIS_TO_A_SECURE_PASSWORD

# =============================================================================
# WINDMILL CONFIGURATION
# =============================================================================

# Windmill image (use -ee for Enterprise Edition if licensed)
WM_IMAGE=ghcr.io/windmill-labs/windmill:main

# Number of worker replicas (adjust based on expected load)
WORKER_REPLICAS=3

# Log level (error, warn, info, debug, trace)
RUST_LOG=info

# Disable nsjail (set to false if you have proper Linux kernel support)
DISABLE_NSJAIL=true

# =============================================================================
# AI API KEYS (stored in Windmill Resources, not here)
# =============================================================================
# Note: API keys for Cohere, Groq, etc. should be configured as
# Windmill Resources in the Windmill UI, not in this file.
# This keeps secrets out of the deployment configuration.

# =============================================================================
# OPTIONAL: EXTERNAL DATABASE
# =============================================================================
# If using an external managed database (like Supabase, AWS RDS, etc.),
# set this URL and change db service replicas to 0 in docker-compose.prod.yml
# DATABASE_URL=postgres://user:password@host:5432/archevi?sslmode=require

# =============================================================================
# OPTIONAL: SMTP CONFIGURATION (for email notifications)
# =============================================================================
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=notifications@archevi.ca
# SMTP_PASSWORD=smtp_password
# SMTP_FROM=notifications@archevi.ca

# =============================================================================
# OPTIONAL: BACKUP CONFIGURATION
# =============================================================================
# S3-compatible storage for off-site backups
# BACKUP_S3_ENDPOINT=s3.amazonaws.com
# BACKUP_S3_BUCKET=archevi-backups
# BACKUP_S3_ACCESS_KEY=your_access_key
# BACKUP_S3_SECRET_KEY=your_secret_key
# BACKUP_S3_REGION=ca-central-1
